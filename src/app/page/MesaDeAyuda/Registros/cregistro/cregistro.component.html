<mat-toolbar color="primary" class="example-toolbar submenu example-button">
    <div class="example-button-rowR">
      <button mat-stroked-button class="btnHeader" routerLink="/page/mesadeayuda/registro">
        <mat-icon class="maticonmenu">arrow_back</mat-icon>
        <span class="maticontitle">Atrás</span>
      </button>
    </div>
    <div class="example-button-row">
        <button *ngIf="btnAsignar" mat-stroked-button class="btnHeader" #tooltip="matTooltip" matTooltip="Asignar"
            type="button" [disabled]="frmGrupo.invalid || ideSede === 0"
            (click)="guardar(1)">
            <mat-icon class="maticonmenu">person_add_alt_1</mat-icon>
            <span class="maticontitle">Asignar</span>
        </button>
        <button *ngIf="btnGuardar" mat-stroked-button class="btnHeader" #tooltip="matTooltip" matTooltip="Guardar"
            type="submit" [disabled]="frmGrupo.invalid || ideSede === 0" form="ngForm">
            <mat-icon class="maticonmenu">save</mat-icon>
            <span class="maticontitle">Guardar</span>
        </button>
        <button *ngIf="btnActualiz" mat-stroked-button class="btnHeader" #tooltip="matTooltip" matTooltip="Enviar actualización"
            type="button" [disabled]="frmGrupo.invalid || ideSede === 0"
            (click)="guardar(3)">
            <mat-icon class="maticonmenu">send</mat-icon>
            <span class="maticontitle">Enviar</span>
        </button>
        <button *ngIf="btnResuelto" mat-stroked-button class="btnHeader" #tooltip="matTooltip" matTooltip="Ticket resuelto"
            type="button" [disabled]="frmGrupo.invalid || ideSede === 0"
            (click)="guardar(5)">
            <mat-icon class="maticonmenu">thumb_up</mat-icon>
            <span class="maticontitle">Resolver</span>
        </button>
        <button *ngIf="btnEliminar" mat-stroked-button class="btnHeader" #tooltip="matTooltip" matTooltip="Eliminar"
            type="button" [disabled]="frmGrupo.invalid || ideSede === 0"
            (click)="guardar(0)">
            <mat-icon class="maticonmenu">delete</mat-icon>
            <span class="maticontitle">Eliminar</span>
        </button>
    </div>
</mat-toolbar>

<form onkeydown="return event.key != 'Enter';" class="forms" id="ngForm" [formGroup]="form" #frmGrupo="ngForm" (ngSubmit)="guardar(2)">

<div class="container">  
<mat-card class="cardborde">   
  <mat-toolbar class="cardtitle"></mat-toolbar>

  <!--h2 *ngIf="id==0" class="title-label" style="margin: 0;">CREAR {{getDescTipo(TIPO.value)}}</h2>
  <h2 *ngIf="id!==0 && edit" class="title-label" style="margin: 0;">{{pantallaPrev}} EDITAR {{getDescTipo(TIPO.value)}}</h2>
  <h2 *ngIf="id!==0 && !edit" class="title-label" style="margin: 0;">{{pantallaPrev}} VER {{getDescTipo(TIPO.value)}}</h2-->

  <mat-divider></mat-divider>
  
  <div id="content" *ngIf="id !== 0"> 
      <div style="width: 100%; float:left;margin-bottom: -17px;">
        <div class="card-title-label1">
            <span style="text-transform: uppercase;">ESTADO {{estado}}</span>
          </div> 
        <div class="card-title-label2">
          <span>CODIGO: {{documento}}</span>
          <div class="circulotitle {{claseEstado}}"></div>
        </div> 
      </div> 
  </div>

        <div class="content">

          <!--div style="padding-bottom: 10px; color: red;">
            <mat-label *ngIf="registroCargada !== undefined && id !== 0 && camposCambiados(registroCargada!)">
              *Tiene cambios sin guardar
            </mat-label>
          </div-->         

          <div fxLayout="row wrap" fxLayoutGap="16px grid">
            <div [hidden]="true">
              <mat-form-field appearance="outline">
                  <input matInput placeholder="Id" formControlName="ideRegistro">
                  <input matInput placeholder="IdEstado" formControlName="ideEstado">
              </mat-form-field>
            </div>

            <div style="display: none;">
              <mat-label>{{getControlLabel('estado')}}</mat-label>
              <div>
                  <mat-label>{{getControlLabel('codigo')}}</mat-label>
              </div>
            </div> 

            <div div fxFlex="50%" fxFlex.xs="100%" fxFlex.sm="100%" style="padding: 0px 16px 0px 0px;">
                <div class="content contentTable">
                    <div fxLayout="row wrap" fxLayoutGap="16px grid">
                        <div div fxFlex="50%" fxFlex.xs="50%" fxFlex.sm="50%">
                            <mat-grid-list cols="12" rowHeight="75px" gutterSize="15px">
                                <mat-grid-tile [colspan]="12">
                                  <mat-form-field appearance="outline">
                                    <mat-label>Solicita</mat-label>
                                    <mat-select
                                      formControlName="ideContacto"
                                      [disabled]="!edit"
                                      required
                                    >
                                      <mat-option *ngFor="let el of tbUsuario" [value]="el.valor">
                                        {{el.descripcion}}
                                      </mat-option>
                                    </mat-select>
                                  </mat-form-field>
                                </mat-grid-tile>
                              </mat-grid-list>
                            <!--mat-grid-list cols="12" rowHeight="75px" gutterSize="15px">
                                <mat-grid-tile [colspan]="12">
                                  <mat-form-field appearance="outline">
                                    <mat-label>Solicita</mat-label>
                                    <input matInput formControlName="contactoInterno" [readonly]="!edit" maxlength="100">
                                  </mat-form-field>
                                </mat-grid-tile>
                            </mat-grid-list-->
                        </div>

                        <div div fxFlex="50%" fxFlex.xs="50%" fxFlex.sm="50%">
                            <mat-grid-list cols="12" rowHeight="75px" gutterSize="15px">
                                <mat-grid-tile [colspan]="12">
                                    <mat-form-field appearance="outline">
                                    <mat-label>e-mail</mat-label>
                                    <input matInput formControlName="correoSolicita" [readonly]="true" maxlength="100" required>
                                    </mat-form-field>
                                </mat-grid-tile>
                            </mat-grid-list>
                        </div>                  
                    </div>
                </div>

                <div class="content contentTable">
                    <div fxLayout="row wrap" fxLayoutGap="16px grid">
                        <div div fxFlex="100%" fxFlex.xs="100%" fxFlex.sm="100%">
                            <mat-grid-list cols="12" rowHeight="75px" gutterSize="15px">
                                <mat-grid-tile [colspan]="12">
                                  <mat-form-field appearance="outline">
                                    <mat-label>Responsable</mat-label>
                                    <mat-select
                                      #RESPON
                                      formControlName="ideResponsable"
                                      [disabled]="!edit"
                                      required
                                    >
                                      <mat-option *ngFor="let el of tbResponsable" [value]="el.valor">
                                        {{el.descripcion}}
                                      </mat-option>
                                    </mat-select>
                                  </mat-form-field>
                                </mat-grid-tile>
                              </mat-grid-list>
                        </div>                        
                    </div>
                </div>
                
                <div class="content contentTable">
                    <div fxLayout="row wrap" fxLayoutGap="16px grid">
                        <div div fxFlex="50%" fxFlex.xs="50%" fxFlex.sm="50%">
                            <mat-grid-list cols="12" rowHeight="75px" gutterSize="15px">
                                <mat-grid-tile [colspan]="12">
                                  <mat-form-field appearance="outline">
                                    <mat-label>Categoría</mat-label>
                                    <mat-select
                                      #CATE
                                      formControlName="codSubTipo"
                                      [disabled]="!edit"
                                      [required] = "idResponsable > 0"
                                      (selectionChange)="selectCategoria($event.value);"
                                    >
                                      <mat-option *ngFor="let el of tbSubTipo" [value]="el.valor">
                                        {{el.descripcion}}
                                      </mat-option>
                                    </mat-select>
                                  </mat-form-field>
                                </mat-grid-tile>
                              </mat-grid-list>
                        </div>

                        <div div fxFlex="50%" fxFlex.xs="50%" fxFlex.sm="50%">
                            <mat-grid-list cols="12" rowHeight="75px" gutterSize="15px">
                                <mat-grid-tile [colspan]="12">
                                  <mat-form-field appearance="outline">
                                    <mat-label>Servicio</mat-label>
                                    <mat-select
                                      #SERV
                                      formControlName="codCat"
                                      [disabled]="!edit"
                                      [required] = "idResponsable > 0"
                                      (selectionChange)="selectServicio(URG.value);"
                                    >
                                      <mat-option *ngFor="let el of filterCategoria" [value]="el.valor">
                                        {{el.descripcion}}
                                      </mat-option>
                                    </mat-select>
                                  </mat-form-field>
                                </mat-grid-tile>
                              </mat-grid-list>
                        </div>
                    </div>
                </div>                
                
                <div class="content contentTable">
                    <div fxLayout="row wrap" fxLayoutGap="16px grid">
                        <div div fxFlex="50%" fxFlex.xs="50%" fxFlex.sm="50%">
                            <mat-grid-list cols="12" rowHeight="75px" gutterSize="15px">
                                <mat-grid-tile [colspan]="12">
                                  <mat-form-field appearance="outline">
                                    <mat-label>Tipo</mat-label>
                                    <mat-select
                                      #TIPO
                                      formControlName="codTipo"
                                      [disabled]="!edit"
                                      [required] = "idResponsable > 0"
                                    >
                                      <mat-option *ngFor="let el of tbTipo" [value]="el.valor">
                                        {{el.descripcion}}
                                      </mat-option>
                                    </mat-select>
                                  </mat-form-field>
                                </mat-grid-tile>
                              </mat-grid-list>
                        </div>
                        <div div fxFlex="50%" fxFlex.xs="50%" fxFlex.sm="50%">
                            <mat-grid-list cols="12" rowHeight="75px" gutterSize="15px">
                                <mat-grid-tile [colspan]="12">
                                    <mat-form-field appearance="outline">
                                    <mat-label>Urgencia</mat-label>
                                    <input #URG matInput formControlName="urgencia" [readonly]="true" maxlength="200" [required] = "idResponsable > 0">
                                    <button *ngIf="validaUrgencia(URG.value, false)" type="button" matSuffix mat-icon-button aria-label="Reducir" (click)="changeUrgencia(URG.value, -1)">
                                        <mat-icon>remove</mat-icon>
                                    </button>
                                    <button *ngIf="validaUrgencia(URG.value, true)" type="button" matSuffix mat-icon-button aria-label="Aumentar" (click)="changeUrgencia(URG.value, 1)">
                                        <mat-icon>add</mat-icon>
                                    </button>
                                    </mat-form-field>
                                </mat-grid-tile>
                            </mat-grid-list>
                        </div>
                    </div>
                </div>
                <mat-grid-list *ngIf="prioridad !== ''" cols="12" rowHeight="40px" gutterSize="10px">
                    <mat-grid-tile [colspan]="12" *ngIf="id !== 0">
                        <mat-label>
                        Prioridad: {{prioridad}}
                        </mat-label>
                    </mat-grid-tile>
                </mat-grid-list>
            </div>

            <div div fxFlex="50%" fxFlex.xs="100%" fxFlex.sm="100%" style="padding: 0px 16px 0px 0px;">
                <div class="content contentTable">
                    <div fxLayout="row wrap" fxLayoutGap="16px grid">
                        <div div fxFlex="100%" fxFlex.xs="100%" fxFlex.sm="100%">
                            <mat-grid-list cols="12" rowHeight="75px" gutterSize="15px">
                                <mat-grid-tile [colspan]="12">
                                    <mat-form-field appearance="outline">
                                    <mat-label>Título</mat-label>
                                    <input matInput formControlName="descripcion" [readonly]="!edit" maxlength="200" [required] = "idResponsable > 0">
                                    </mat-form-field>
                                </mat-grid-tile>
                            </mat-grid-list>
                        </div>

                        <!--div div fxFlex="50%" fxFlex.xs="100%" fxFlex.sm="100%">
                            <mat-grid-list cols="12" rowHeight="75px" gutterSize="15px">
                                <mat-grid-tile [colspan]="12">
                                    <mat-form-field appearance="outline">
                                    <mat-label>Cliente</mat-label>
                                    <input matInput formControlName="cliente" [readonly]="!edit" maxlength="100" required>
                                    </mat-form-field>
                                </mat-grid-tile>
                            </mat-grid-list>
                        </div-->
                        
                        <div div fxFlex="50%" fxFlex.xs="100%" fxFlex.sm="100%">
                            <mat-grid-list cols="12" rowHeight="75px" gutterSize="15px">
                                <mat-grid-tile [colspan]="12">
                                    <mat-form-field [color]="sedeColor" minlength="1" maxlength="100" appearance="outline">
                                    <mat-label>Sede</mat-label>
                                    <input #SEDE type="text" matInput [formControl]="controlSedes" [matAutocomplete]="autoSede" [readonly]="!edit" required>
                                    <button *ngIf="SEDE.value && edit" type="button" matSuffix mat-icon-button aria-label="Limpiar" (click)="SEDE.value=''; setCurSede(undefined, true); initFilterSedes();">
                                        <mat-icon>close</mat-icon>
                                    </button>
                                    <mat-autocomplete #autoSede="matAutocomplete" [displayWith]="mostrarAutoCombo" (optionSelected)="changeSede($event)">
                                        <mat-option *ngFor="let el of filterSedes | async" [value]="el">
                                        {{el.descripcion}}
                                        </mat-option>
                                    </mat-autocomplete>
                                    </mat-form-field>
                                </mat-grid-tile>
                            </mat-grid-list>
                        </div>                        

                        <div div fxFlex="50%" fxFlex.xs="100%" fxFlex.sm="100%">
                            <mat-grid-list cols="12" rowHeight="75px" gutterSize="15px">
                                <mat-grid-tile [colspan]="12">
                                    <mat-form-field appearance="outline">
                                    <mat-label>Área</mat-label>
                                    <input matInput formControlName="area" [readonly]="!edit" maxlength="100">
                                    </mat-form-field>
                                </mat-grid-tile>
                            </mat-grid-list>
                        </div>
                        
                    </div>
                </div>

                <div class="content contentTable">
                    <div fxLayout="row wrap" fxLayoutGap="16px grid">
                        <div div fxFlex="100%" fxFlex.xs="100%" fxFlex.sm="100%">
                            <mat-grid-list cols="12" rowHeight="120px" gutterSize="15px">
                                <mat-grid-tile [colspan]="12">
                                    <mat-form-field appearance="outline">
                                    <mat-label>Observaciones</mat-label>
                                    <textarea style="resize: none;" matInput formControlName="observaciones" [readonly]="!edit" maxlength="500" rows="3"></textarea>
                                    </mat-form-field>
                                </mat-grid-tile>
                            </mat-grid-list>
                        </div>
                    </div>
                </div>
        
                <mat-grid-list cols="12" rowHeight="40px" gutterSize="10px">
                    <mat-grid-tile [colspan]="12" *ngIf="id !== 0">
                        <mat-label>
                        <a style="font-weight: 500; color: #1a0da4">
                            Fecha de creación: 
                        </a>
                        {{getControlLabel('fecSol')}}
                        </mat-label>
                    </mat-grid-tile>
                </mat-grid-list>
            </div>
        </div>
    </div> 
</mat-card>
</div>
</form>